import{_ as t,s as e,R as o,U as s,r as i,c as n,A as a,f as l,g as c,w as r,F as u,d as h,b as p,K as f,L as d,aW as x,o as m,k as y,t as w,i as g,q as C,p as k,M as L}from"./index-B3fvMXoi.js";import{p as S}from"./form-item.DA0uEMIA.js";import{p as T}from"./form-item-input.-4VTgKnM.js";import{q as _,r as I}from"./zhdnTradeApi.Dx0rs8q0.js";import{t as b,a as q}from"./tradeConfig.BxhAxmwf.js";const R=t({emits:["close","success"],props:{type:{type:Number,default:1},show:{type:Boolean,default:!1},newPrice:{type:String,default:"-"},id:{type:String,default:null},quotationInfo:{type:Object,default:{}}},components:{pformItem:S,pformItemInput:T},watch:{show:{handler(){this.popShow=this.show},immediate:!0}},data:()=>({popShow:!1,taxList:b,taxRateList:q,currentyList:[{name:"RMB"},{name:"USD"},{name:"HKB"}],taxListShow:!1,currentyListShow:!1,price:"",extraFee:"",currenty:"RMB",tax:"",taxRate:"",remark:"",chooseTaxType:!1}),mounted(){},methods:{taxListShowChange(t){this.taxListShow=t},currentyListShowChange(t){this.currentyListShow=t},chooseTax(t){this.chooseTaxType=t,this.taxListShow=!0},taxListClick(t){this.chooseTaxType?this.tax=t.name:this.taxRate=t.name},currencyListClick(t){this.currenty=t.name},closePop(){this.$emit("close")},confirmAction(){if(""!=this.price)if(0==this.type){const t={resourceId:this.quotationInfo?this.quotationInfo.resourceId:this.id,freight:this.price,extrasCategory:"",freightTaxRate:this.taxRate,freightTicketCategory:this.tax};this.quotationInfo&&this.quotationInfo.id&&(t.id=this.quotationInfo.id),o({title:"正在提交..."}),_(t).then((t=>{s(),e({icon:"success",title:"已提交报价"}),this.$emit("success")})).catch((t=>{s(),t.data&&t.data.msg?e({title:t.data.msg,icon:"none"}):e({title:"网络请求失败，请稍后重试",icon:"none"})}))}else{if(!this.quotationInfo.id)return void e({title:"数据异常",icon:"none"});const t={priceId:this.quotationInfo.id,price:this.price};o({title:"正在提交..."}),I(t).then((t=>{s(),e({icon:"success",title:"已提交报价"}),this.$emit("success")})).catch((t=>{s(),t.data&&t.data.msg?e({title:t.data.msg,icon:"none"}):e({title:"网络请求失败，请稍后重试",icon:"none"})}))}else e({title:"请输入您的报价",icon:"none"})}}},[["render",function(t,e,o,s,S,T){const _=C,I=i(n("u-icon"),h),b=k,q=i(n("u-input"),p),R=a("pformItem"),j=i(n("u-line"),f),z=L,F=i(n("u-popup"),d),O=i(n("u-action-sheet"),x);return m(),l(u,null,[c(F,{show:S.popShow,round:12,mode:"bottom",onClose:T.closePop},{default:r((()=>[c(_,{class:"u-p-b-60"},{default:r((()=>[c(_,{class:"u-flex u-flex-items-center",style:{margin:"30rpx 30rpx 20rpx 30rpx","justify-content":"space-between"}},{default:r((()=>[c(_,{style:{"font-size":"30rpx","font-weight":"500",color:"#272e3f"}},{default:r((()=>[y(w(0==o.type?"请填写议价信息":"议价"),1)])),_:1}),c(_,{style:{width:"120rpx","font-size":"23rpx",display:"flex","justify-content":"flex-end"},onClick:T.closePop},{default:r((()=>[c(I,{name:"close"})])),_:1},8,["onClick"])])),_:1}),c(_,null,{default:r((()=>[c(_,{class:"u-flex u-flex-items-center u-m-l-30 u-m-r-30"},{default:r((()=>[c(_,{class:"u-flex u-flex-column"},{default:r((()=>[c(_,{style:{color:"#272e3f","font-size":"30rpx","font-weight":"500"}},{default:r((()=>[y("我的出价")])),_:1}),c(_,null,{default:r((()=>[c(b,{style:{color:"#999999","font-size":"24rpx"}},{default:r((()=>[y("对方报价：")])),_:1}),c(b,{style:{color:"#FF0003","font-size":"24rpx","font-weight":"500"}},{default:r((()=>[y("￥"+w(o.newPrice),1)])),_:1})])),_:1})])),_:1}),c(_,{class:"u-flex u-m-l-20 u-p-l-20 u-p-r-20",style:{flex:"1",height:"90rpx",background:"#f4f4f4","border-radius":"16rpx"}},{default:r((()=>[c(q,{border:"none",type:"digit",fontSize:"30rpx",placeholder:"请输入报价金额",modelValue:S.price,"onUpdate:modelValue":e[0]||(e[0]=t=>S.price=t)},null,8,["modelValue"]),c(I,{name:"edit-pen",size:"38rpx",color:"#2647FF"})])),_:1})])),_:1})])),_:1}),0==o.type?(m(),g(_,{key:0,style:{margin:"20rpx 30rpx 30rpx 30rpx",border:"2px solid #f6f6f6","border-radius":"8px",padding:"0 30rpx"}},{default:r((()=>[c(R,{title:"发票类型",onClick:e[1]||(e[1]=t=>T.chooseTax(!0)),content:S.tax},null,8,["content"]),c(R,{title:"发票税率",onClick:e[2]||(e[2]=t=>T.chooseTax(!1)),content:S.taxRate},null,8,["content"]),c(R,{title:"币种",onClick:e[3]||(e[3]=t=>S.currentyListShow=!0),content:S.currenty},null,8,["content"])])),_:1})):(m(),g(_,{key:1,style:{height:"140rpx"}})),c(j),c(z,{class:"u-m-l-30 u-m-r-30",style:{"background-color":"#2647FF",color:"#fff"},onClick:T.confirmAction},{default:r((()=>[y("确定")])),_:1},8,["onClick"]),c(_,{style:{height:"10rpx"}})])),_:1})])),_:1},8,["show","onClose"]),c(O,{actions:S.chooseTaxType?S.taxList:S.taxRateList,show:S.taxListShow,"onUpdate:show":T.taxListShowChange,closeOnClickOverlay:!0,closeOnClickAction:!0,cancelText:"取消",onSelect:T.taxListClick},null,8,["actions","show","onUpdate:show","onSelect"]),c(O,{actions:S.currentyList,show:S.currentyListShow,"onUpdate:show":T.currentyListShowChange,closeOnClickOverlay:!0,closeOnClickAction:!0,cancelText:"取消",onSelect:t.currentyListClick},null,8,["actions","show","onUpdate:show","onSelect"])],64)}]]);export{R as default};
