import{_ as e,R as t,s,T as l,c5 as a,V as o,c6 as i,c7 as r,c8 as n,c9 as c,ca as d,n as p,r as u,c as f,f as x,g as h,w as m,F as g,H as y,d as _,q as b,K as z,a9 as A,e as w,o as k,k as F,t as L,l as C,ao as B,m as $,p as v,i as V,j as N}from"./index-oXtcu1jG.js";import{_ as E}from"./z-paging.5yIaKEvz.js";import{_ as H}from"./icon_arrow.D1jJ-NuQ.js";const q=e({data:()=>({typeName:"",startAddress:"",endAddress:"",box:"20GP",showBox:!1,boxList:[["20GP","40GP","40HQ","45HQ"]],product:"",tabList:[{name:"智能推荐"},{name:"价格最低"},{name:"时效最短"},{name:"碳排放最低"}],current:0,sorttype:0,dataList:[],isSaved:!1}),onLoad(e){this.typeName=e.typeName,"铁运查询"==this.typeName&&(this.boxList=[["20英尺集装箱","40英尺集装箱","35吨敞顶箱","批量快运","整车"]]),this.startAddress=e.startAddress,this.endAddress=e.endAddress,this.product=e.product,this.box=e.box},methods:{back(){t()},boxConfirm(e){this.box=e.value[0],this.showBox=!1,this.$refs.paging.reload(!0)},confirm(){0!=this.startAddress.length?0!=this.endAddress.length?this.$refs.paging.reload(!0):s({title:"请输入目的地"}):s({title:"请输入起运地"})},change(e){this.sorttype=e.index,this.$refs.paging.reload(!0)},queryList(e,t){let s={current:e,size:t,start:this.startAddress,end:this.endAddress,boxType:this.box,productname:this.product,sorttype:this.sorttype};l({}),"长途公路"==this.typeName?a(s).then((e=>{"暂无承载数据"!=e.msg?(this.$refs.paging.complete(e.data.queryResponseDtoList),this.saveHistory()):this.$refs.paging.complete([])})).catch((e=>{this.$refs.paging.complete(!1)})).finally((e=>{o()})):"集装箱拖车"==this.typeName?i(s).then((e=>{this.$refs.paging.complete(e.data.queryResponseDtoList),this.saveHistory()})).catch((e=>{this.$refs.paging.complete(!1)})).finally((e=>{o()})):"国际海运"==this.typeName?r(s).then((e=>{this.$refs.paging.complete(e.data.queryResponseDtoList),this.saveHistory()})).catch((e=>{this.$refs.paging.complete(!1)})).finally((e=>{o()})):"国内水运"==this.typeName?n(s).then((e=>{this.$refs.paging.complete(e.data.queryResponseDtoList),this.saveHistory()})).catch((e=>{this.$refs.paging.complete(!1)})).finally((e=>{o()})):"铁运查询"==this.typeName&&c(s).then((e=>{this.$refs.paging.complete(e.data.queryResponseDtoList),this.saveHistory()})).catch((e=>{this.$refs.paging.complete(!1)})).finally((e=>{o()}))},saveHistory(){this.isSaved||setTimeout((()=>{let e=this.dataList[0].price,t=this.dataList[0].preprice;d(this.typeName,this.startAddress+"-"+this.endAddress,t>0?t:e).then((e=>{this.isSaved=!0}))}),200)},goDetail(e){p({url:"/pages/smart/planIntroduce?id="+e.lineboxid})}}},[["render",function(e,t,s,l,a,o){const i=u(f("u-status-bar"),y),r=u(f("u-icon"),_),n=B,c=$,d=b,p=u(f("u-line"),z),q=v,D=u(f("u-tabs"),A),R=u(f("z-paging"),E),j=u(f("u-picker"),w);return k(),x(g,null,[h(d,{class:"u-flex-column"},{default:m((()=>[h(i),h(d,{class:"u-flex-column",style:{"z-index":"100",position:"sticky",top:"0"}},{default:m((()=>[h(d,{class:"u-flex",style:{"background-color":"white","align-items":"baseline"}},{default:m((()=>[h(r,{name:"arrow-left",color:"black",bold:"true",style:{"margin-left":"20rpx"},onClick:t[0]||(t[0]=e=>o.back())}),h(d,{class:"u-flex-column",style:{width:"95%"}},{default:m((()=>[h(d,{class:"u-flex-column bg_search",style:{padding:"24rpx 20rpx",margin:"20rpx 30rpx 0"}},{default:m((()=>[h(d,{class:"u-flex u-flex-items-center"},{default:m((()=>[h(n,{style:{color:"#292A2B","font-size":"28rpx",flex:"1"},modelValue:a.startAddress,"onUpdate:modelValue":t[1]||(t[1]=e=>a.startAddress=e),placeholder:"起运地","auto-height":"",onConfirm:o.confirm},null,8,["modelValue","onConfirm"]),h(c,{src:H,style:{width:"62rpx",height:"12rpx",margin:"0 20rpx","align-self":"center"}}),h(n,{style:{color:"#292A2B","font-size":"28rpx","text-align":"end",flex:"1"},modelValue:a.endAddress,"onUpdate:modelValue":t[2]||(t[2]=e=>a.endAddress=e),placeholder:"目的地","auto-height":"",onConfirm:o.confirm},null,8,["modelValue","onConfirm"])])),_:1}),h(p,{style:{margin:"24rpx 0"}}),h(d,{class:"u-flex"},{default:m((()=>[h(d,{class:"u-flex",style:{flex:"1"}},{default:m((()=>[h(q,{style:{"font-size":"22rpx",color:"#666E81"}},{default:m((()=>[F(" 箱型： ")])),_:1}),h(q,{style:{"font-size":"22rpx",color:"#292A2B",flex:"1"},onClick:t[3]||(t[3]=e=>a.showBox=!0)},{default:m((()=>[F(L(a.box),1)])),_:1})])),_:1}),h(d,{class:"u-flex",style:{width:"50%","margin-left":"20rpx"}},{default:m((()=>[h(q,{style:{"font-size":"22rpx",color:"#666E81"}},{default:m((()=>[F(" 货品名称： ")])),_:1}),h(n,{style:{"font-size":"22rpx",color:"#292A2B",flex:"1"},modelValue:a.product,"onUpdate:modelValue":t[4]||(t[4]=e=>a.product=e),placeholder:"-","auto-height":"",onConfirm:o.confirm},null,8,["modelValue","onConfirm"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),h(D,{style:{"background-color":"white"},list:a.tabList,lineColor:"#292A2B",activeStyle:{color:"#292A2B","font-size":"28rpx","font-weight":"bold"},inactiveStyle:{color:"#666E81","font-size":"24rpx"},onChange:o.change,current:a.current},null,8,["list","onChange","current"]),h(d,{class:"u-flex",style:{"background-color":"#F0F2F7",padding:"30rpx"}},{default:m((()=>[h(q,{style:{"font-size":"22rpx",color:"#666E81"}},{default:m((()=>[F("根据运输路线筛选出 ")])),_:1}),h(q,{style:{"font-size":"22rpx",color:"#FF0003"}},{default:m((()=>[F(L(a.dataList.length),1)])),_:1}),h(q,{style:{"font-size":"22rpx",color:"#666E81"}},{default:m((()=>[F(" 条方案 ")])),_:1})])),_:1})])),_:1}),h(R,{ref:"paging",modelValue:a.dataList,"onUpdate:modelValue":t[5]||(t[5]=e=>a.dataList=e),onQuery:o.queryList,"use-page-scroll":"",scrollable:!1,"auto-clean-list-when-reload":!1,style:{"background-color":"#F0F2F7"}},{default:m((()=>[(k(!0),x(g,null,C(a.dataList,((e,t)=>(k(),V(d,{class:"bg_white_radius_16 u-flex-column",style:{margin:"20rpx 30rpx"},key:t,onClick:t=>o.goDetail(e)},{default:m((()=>[h(d,{class:"u-flex u-flex-between"},{default:m((()=>[h(q,{class:"bg_no"},{default:m((()=>[F(L(e.productNo),1)])),_:2},1024),h(r,{name:"play-right-fill",size:"10",color:"#2647FF",label:"方案介绍","label-size":"10","label-color":"#2647FF","label-pos":"left",style:{margin:"18rpx 30rpx 0"}})])),_:2},1024),h(d,{class:"u-flex u-flex-items-center",style:{"align-items":"baseline",margin:"30rpx"}},{default:m((()=>[h(d,{class:"u-flex-column",style:{flex:"1"}},{default:m((()=>[h(q,{style:{color:"#292A2B","font-size":"32rpx"}},{default:m((()=>[F(L(e.startfullname),1)])),_:2},1024),h(q,{class:"u-line-2",style:{color:"#666E81","font-size":"24rpx","margin-top":"10rpx"}},{default:m((()=>[F(L(e.startdetail),1)])),_:2},1024)])),_:2},1024),h(d,{class:"u-flex-column u-flex-items-center"},{default:m((()=>[h(q,{style:{"font-size":"20rpx",color:"#666E81"}},{default:m((()=>[F(L(e.linetype),1)])),_:2},1024),h(c,{src:H,style:{width:"132rpx",height:"12rpx",margin:"0 20rpx","align-self":"center"}})])),_:2},1024),h(d,{class:"u-flex-column",style:{flex:"1","align-items":"flex-end"}},{default:m((()=>[h(q,{style:{color:"#292A2B","font-size":"32rpx","text-align":"end"}},{default:m((()=>[F(L(e.endfullname),1)])),_:2},1024),h(q,{class:"u-line-2",style:{color:"#666E81","font-size":"24rpx","margin-top":"10rpx","text-align":"end"}},{default:m((()=>[F(L(e.enddetail),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(d,{class:"u-flex u-flex-items-center",style:{margin:"0 30rpx"}},{default:m((()=>[h(q,{class:"text_gray_11"},{default:m((()=>[F(L(e.boxtype),1)])),_:2},1024),h(d,{style:{width:"1px",height:"18px",background:"#c9ccd0",margin:"0 8rpx"}}),h(q,{class:"text_gray_11"},{default:m((()=>[F("预计"+L(e.aging)+"h",1)])),_:2},1024),h(d,{style:{width:"1px",height:"18px",background:"#c9ccd0",margin:"0 8rpx"}}),h(q,{class:"text_gray_11"},{default:m((()=>[F(L(e.distance)+"km",1)])),_:2},1024),h(d,{style:{width:"1px",height:"18px",background:"#c9ccd0",margin:"0 8rpx"}}),h(q,{class:"text_gray_11"},{default:m((()=>[F(L(e.carbonemission)+"kg碳排放",1)])),_:2},1024)])),_:2},1024),h(d,{class:"u-flex u-flex-items-center",style:{margin:"30rpx","justify-content":"space-between"}},{default:m((()=>[h(r,{name:"/static/image/smart/icon_logo.png",size:"16",label:e.customer,"label-size":"12","label-color":"#292A2B",space:"8"},null,8,["label"]),h(d,{class:"u-flex-column"},{default:m((()=>[h(d,{class:"u-flex",style:{"align-items":"baseline"}},{default:m((()=>[e.preprice>0?(k(),V(q,{key:0,style:{"font-size":"20rpx",color:"#666E81","text-decoration":"line-through"}},{default:m((()=>[F(" ￥"+L(e.price),1)])),_:2},1024)):N("",!0),h(q,{style:{"font-size":"28rpx",color:"#FF0003","margin-left":"12rpx"}},{default:m((()=>[F(" ￥ ")])),_:1}),h(q,{style:{"font-size":"44rpx",color:"#FF0003"}},{default:m((()=>[F(L(e.preprice>0?e.preprice:e.price),1)])),_:2},1024)])),_:2},1024),e.preprice>0?(k(),V(q,{key:0,style:{"font-size":"20rpx",color:"#FF0003","text-align":"end"}},{default:m((()=>[F(" 已优惠￥"+L((e.price-e.preprice).toFixed(2)),1)])),_:2},1024)):N("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue","onQuery"])])),_:1}),h(j,{title:"箱型选择",show:a.showBox,columns:a.boxList,onConfirm:o.boxConfirm,onCancel:t[6]||(t[6]=e=>a.showBox=!1)},null,8,["show","columns","onConfirm"])],64)}],["__scopeId","data-v-e1fde43e"]]);export{q as default};
