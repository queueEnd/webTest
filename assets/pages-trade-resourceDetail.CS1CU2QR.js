import{_ as t,R as e,aJ as a,n as i,T as s,V as o,s as d,r as l,c as n,A as r,i as c,w as m,H as u,d as h,aX as f,o as D,g as _,k as p,j as g,t as v,y,f as A,l as C,F as k,q as b,m as L,p as w}from"./index-oXtcu1jG.js";import{_ as T}from"./z-paging.5yIaKEvz.js";import{c as I,k as S}from"./zhdnTradeApi.DtENn4FQ.js";import{p as x}from"./address-item.DzriXGz8.js";import{R as z}from"./tradeConfig.Csb849zU.js";const q=t({components:{pAddressItem:x},data:()=>({id:null,loading:!1,itemData:null,quotationLimitTime:0,timeData:{},goodsInfoDesc:[{title:"单      号",value:"--",copy:!0},{title:"资源类型",value:"--"},{title:"意向货种",value:"--"},{title:"预计运输时间",value:"--"},{title:"产品价格",value:"--"},{title:"价格有效期",value:"--"},{title:"收款方式",value:"--"}],actionList:[],actionListShow:!1}),watch:{itemData:{handler(){if(this.itemData){let a="",i="#FAAD14";switch(this.itemData.isValid){case 1:case 2:a="进行中",i="#FAAD14";break;case 3:a="已成交",i="#00CB40";break;case 4:a="已失效",i="#AAAAAA";break;case 5:a="已下架",i="#AAAAAA"}if(this.itemData.statusText=a,this.itemData.statusColor=i,1==this.itemData.isValid||2==this.itemData.isValid){const t=new Date(this.itemData.estimatedShippingTime);if(!isNaN(t.getTime())){this.itemData.deviationTime&&this.itemData.deviationTime>0&&t.setDate(t.getDate()+1-this.itemData.deviationTime);const e=Date.now(),a=new Date(t).getTime(),i=Math.floor(a-e);this.quotationLimitTime=i}}if(this.itemData.address&&this.itemData.address.id){const t=this.itemData.address,e={},a={};e.address=t.startAddress,e.country=t.startCountry,e.province=t.startProvince,e.city=t.startCity,e.district=t.startDistr,a.address=t.endAddress,a.country=t.endCountry,a.province=t.endProvince,a.city=t.endCity,a.district=t.endDistr,this.itemData.startAddressItem=e,this.itemData.endAddressItem=a}this.goodsInfoDesc[0].value=this.itemData.code;for(var t=0;t<z.length;t++){const e=z[t];if(this.itemData.source==e.id){this.goodsInfoDesc[1].value=e.name;break}}this.goodsInfoDesc[2].value=this.itemData.product,this.goodsInfoDesc[3].value=this.itemData.estimatedShippingTime+" ±"+this.itemData.deviationTime;for(t=0;t<z.length;t++){const e=z[t];if(this.itemData.source==e.id){this.goodsInfoDesc[1].value=e.name;break}}var e="";this.itemData.trailerContainerInfo.forEach((t=>{""!=e&&(e+="\n"),e+=t.product,e+="~",e+=t.price})),this.goodsInfoDesc[4].value=e,this.goodsInfoDesc[5].value=this.itemData.serviceexecudate+"~"+this.itemData.serviceenddate,this.goodsInfoDesc[6].value=this.itemData.payType}},immediate:!0}},onLoad(t){t.id&&(this.id=t.id,this.loadDetailData())},methods:{goBack(){e()},limitTimeChange(t){this.timeData=t},loadDetailData(){this.loading=!0,I(this.id).then((t=>{this.loading=!1,this.itemData=t.data})).catch((t=>{this.loading=!1}))},moreAction(){this.itemData.isCreateBySelf&&(this.actionList=[{name:"下架",color:"#dd524d",fontSize:"30rpx"}],this.actionListShow=!0)},actionListShowChange(t){this.actionListShow=t},actionListClick(t){if("下架"==t.name){let t=this;a({title:"提示",content:"是否下架？",confirmColor:"#2647FF",success:function(e){e.confirm?t.apiDownResource():e.cancel}})}this.actionListShow=!1},goCreateOrder(){1!=this.itemData.isValid&&2!=this.itemData.isValid||i({url:"/pages/smart/orderInput?source=2&id="+this.itemData.id})},apiDownResource(){s({title:"正在下架...",mask:!0}),S(this.itemData.id).then((t=>{o(),200==t.code?(this.loadDetailData(),d({icon:"none",title:"已下架"})):(o(),d({icon:"none",title:err.msg?err.msg:"删除失败"}))})).catch((t=>{o();d({icon:"none",title:"下架失败"})}))}}},[["render",function(t,e,a,i,s,o){const d=l(n("u-status-bar"),u),I=l(n("u-icon"),h),S=b,x=L,z=w,q=r("up-count-down"),j=r("pAddressItem"),B=l(n("u-action-sheet"),f),V=l(n("z-paging"),T);return D(),c(V,{style:{"background-color":"#f0f2f7"}},{top:m((()=>[_(S,{class:"u-flex-col",style:{"background-color":"#2c5eff"}},{default:m((()=>[_(d),_(S,{class:"rd-custom-nav"},{default:m((()=>[_(S,{class:"nav-back-bg",onClick:o.goBack},{default:m((()=>[_(I,{name:"arrow-left",color:"white",size:"18"})])),_:1},8,["onClick"]),_(S,{class:"nav-title"},{default:m((()=>[p("资源详情")])),_:1}),_(S,{style:{height:"100%"}})])),_:1})])),_:1})])),bottom:m((()=>[_(S,{class:"rd-bottom"},{default:m((()=>[s.itemData.isCreateBySelf?(D(),c(S,{key:0,onClick:o.moreAction},{default:m((()=>[_(I,{label:"更多","label-pos":"bottom","label-size":"20rpx",name:"more-circle",size:"32rpx",color:"#333333","label-color":"#333333"})])),_:1},8,["onClick"])):g("",!0),_(S,{style:{flex:"1"}}),_(S,{class:"rd-bottom__btnBlue",onClick:o.goCreateOrder},{default:m((()=>[p("在线下单")])),_:1},8,["onClick"])])),_:1})])),default:m((()=>[_(S,{class:"rd-gradient-bg"}),_(S,{class:"rd-section-bg"},{default:m((()=>[_(x,{class:"rd-one-logo",src:"./static/image/bg_index.png"}),_(S,{class:"rd-one-top"},{default:m((()=>[_(S,{class:"rd-one-top__title"},{default:m((()=>[p(v(s.itemData.productName),1)])),_:1}),_(S,{class:"rd-one-top__status",style:y({"background-color":s.itemData.statusColor})},{default:m((()=>[p(v(s.itemData.statusText),1)])),_:1},8,["style"])])),_:1}),_(S,{class:"rd-one-price"},{default:m((()=>[_(z,{style:{"font-size":"42rpx","font-weight":"500"}},{default:m((()=>[p(v(s.itemData.productName),1)])),_:1})])),_:1}),_(S,{class:"rd-one-tiem"},{default:m((()=>[_(S,{class:"rd-one-tiem__title"},{default:m((()=>[p(v(s.quotationLimitTime>0?"距报价结束":"报价已结束"),1)])),_:1}),s.quotationLimitTime>0?(D(),c(q,{key:0,time:s.quotationLimitTime,format:"HH:mm:ss",autoStart:"",millisecond:"",onChange:o.limitTimeChange},{default:m((()=>[_(S,{class:"tradeLimit-p"},{default:m((()=>[s.timeData.days&&s.timeData.days>0?(D(),c(S,{key:0,class:"tradeLimit-p_day"},{default:m((()=>[p(v(s.timeData.days),1)])),_:1})):g("",!0),s.timeData.days&&s.timeData.days>0?(D(),c(z,{key:1,class:"tradeLimit-p_dayunit"},{default:m((()=>[p("天")])),_:1})):g("",!0),_(S,{class:"tradeLimit-p_item"},{default:m((()=>[p(v(s.timeData.hours>10?s.timeData.hours:"0"+s.timeData.hours),1)])),_:1}),_(z,{class:"tradeLimit-p_doc"},{default:m((()=>[p(":")])),_:1}),_(S,{class:"tradeLimit-p_item"},{default:m((()=>[p(v(String(s.timeData.minutes).padStart(2,"0")),1)])),_:1}),_(z,{class:"tradeLimit-p_doc"},{default:m((()=>[p(":")])),_:1}),_(S,{class:"tradeLimit-p_item"},{default:m((()=>[p(v(String(s.timeData.seconds).padStart(2,"0")),1)])),_:1})])),_:1})])),_:1},8,["time","onChange"])):g("",!0)])),_:1})])),_:1}),_(S,{class:"rd-section-bg"},{default:m((()=>[_(j,{class:"u-m-b-20",canChoose:!1,startAddress:s.itemData.startAddressItem,endAddress:s.itemData.endAddressItem},null,8,["startAddress","endAddress"]),g("",!0)])),_:1}),_(S,{class:"rd-section-bg rd-three"},{default:m((()=>[_(S,{class:"rd-three__title"},{default:m((()=>[p("资源信息")])),_:1}),_(S,{class:"rd-three__file"},{default:m((()=>[_(S,{class:"rd-three__file__info"},{default:m((()=>[p(v(s.itemData.serviceReq),1)])),_:1}),(D(!0),A(k,null,C(s.itemData.files,((t,e)=>(D(),c(S,{key:e},{default:m((()=>[_(I,{name:"file-text",size:"30rpx"}),_(z,{class:"rd-three__file__name"},{default:m((()=>[p(v(t.fileName),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(D(!0),A(k,null,C(s.goodsInfoDesc,((t,e)=>(D(),c(S,{key:e,class:"rd-three-item"},{default:m((()=>[_(S,{class:"rd-three-item__title"},{default:m((()=>[p(v(t.title),1)])),_:2},1024),_(S,{class:"rd-three-item__value"},{default:m((()=>[p(v(t.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),_(B,{actions:s.actionList,show:s.actionListShow,"onUpdate:show":o.actionListShowChange,closeOnClickOverlay:!0,closeOnClickAction:!0,cancelText:"取消",onSelect:o.actionListClick},null,8,["actions","show","onUpdate:show","onSelect"])])),_:1})}],["__scopeId","data-v-1d9fd4a9"]]);export{q as default};
