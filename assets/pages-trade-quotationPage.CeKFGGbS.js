import{_ as t,$ as e,O as a,n as s,r as o,c as n,A as i,i as r,aS as l,w as d,a8 as u,aZ as c,d as f,o as _,g as p,k as h,f as m,l as g,F as y,q as x,p as q,t as F,m as b}from"./index-B3fvMXoi.js";import{_ as k}from"./uv-skeletons.B5flGH1a.js";import{_ as A}from"./z-paging.Ctbk3ePi.js";import{t as C}from"./trade-quotation-plan.CXOZELux.js";import{b as S,s as D}from"./zhdnTradeApi.Dx0rs8q0.js";import{o as v}from"./zhtuseful.CyewbK9i.js";import{_ as I}from"./draft_go.D-DgwqqR.js";import"./trade-quote-price.b77gy01x.js";import"./icon-minuso.BaakFujK.js";const R=t({components:{tradeQuotationPlan:C},props:{id:{type:String,default:null},type:{type:String,default:""}},data:()=>({loading:!1,skeleton:v.skeleton,tabs:[{name:"全部"},{name:"AI报价"},{name:"客服报价"},{name:"在线报价"}],tabIndex:0,dataList:[],qutationFor:null}),watch:{qutationFor:{handler(){if(this.qutationFor.id){const t=this.qutationFor.addressList[0];this.qutationFor.startAddress=t.startAddress,this.qutationFor.endAddress=t.endAddress,"中国"==t.startCountry||""==t.startCountry?this.qutationFor.startAddressInfo=t.startProvince+t.startCity+t.startDistr:this.qutationFor.startAddressInfo=t.startCountry,"中国"==t.endCountry||""==t.startCountry?this.qutationFor.endAddressInfo=t.endProvince+t.endCity+t.endDistr:this.qutationFor.endAddressInfo=t.endCountry}},immediate:!0}},onLoad(t){e("tradeGoodsDetail-refresh",(t=>{this.onRefresh()})),t.id&&this.onRefresh()},onUnload(){a("tradeGoodsDetail-refresh")},methods:{tabChange(t){this.tabIndex=t.index,this.onRefresh()},loadDetailData(){this.id&&S(this.id).then((t=>{this.qutationFor=t.data,this.loading=!1})).catch((t=>{this.loading=!1}))},onRefresh(){this.id&&(this.id,this.tabIndex,this.loading=!0,D(this.id,this.tabIndex).then((t=>{this.$refs.paging.complete();var e=t.data;e.forEach((t=>{let e="",a="#666666";switch(t.checkStatus){case 1:e="待报价",a="#FAAD14";break;case 4:e="已采用",a="#00CB40";break;case 5:e="已弃用",a="#FF0003";break;default:e="进行中",a="#FAAD14"}t.checkStatusText=e,t.checkStatusColor=a,1==t.type?t.typeStr="智能报价":2==t.type?t.typeStr="在线报价":3==t.type&&(t.typeStr="客服报价")})),this.dataList=e,this.loadDetailData()})).catch((t=>{this.loading=!1,this.$refs.paging.complete()})))},goDetail(t){s({url:"/pages/trade/quotationDetail?id="+t.id})}}},[["render",function(t,e,a,s,C,S){const D=o(n("u-tabs"),u),v=x,R=q,j=o(n("u-empty"),c),z=i("tradeQuotationPlan"),w=o(n("u-icon"),f),L=b,O=o(n("uv-skeletons"),k),P=o(n("z-paging"),A);return _(),r(P,{ref:"paging","refresher-only":"",onOnRefresh:S.onRefresh,style:{"background-color":"#F0F2F7"}},l({default:d((()=>[p(O,{skeleton:C.skeleton,animate:!0,loading:C.loading},{default:d((()=>[p(j,{style:{"margin-top":"200rpx"},show:0==C.dataList.length,icon:"/static/image/common/empty.png",width:"200rpx",height:"200rpx",text:" "},{default:d((()=>[p(v,{style:{display:"flex","flex-direction":"column","align-items":"center"}},{default:d((()=>[p(R,{style:{color:"#272e3f"}},{default:d((()=>[h("暂无报价方案")])),_:1}),p(R,{style:{color:"#999999","margin-top":"10rpx","font-size":"24rpx"}})])),_:1})])),_:1},8,["show"]),(_(!0),m(y,null,g(C.dataList,((t,e)=>(_(),r(v,{key:e},{default:d((()=>[2==t.type?(_(),r(v,{key:0,style:{margin:"0 30rpx 20rpx 30rpx"}},{default:d((()=>[p(z,{quotation:t,sourceData:C.qutationFor,onReload:S.onRefresh},null,8,["quotation","sourceData","onReload"])])),_:2},1024)):(_(),r(v,{key:1,class:"qutation-item",onClick:e=>S.goDetail(t)},{default:d((()=>[p(v,{class:"qutation-item__top"},{default:d((()=>[p(v,{class:"qutation-item__top__orderNo"},{default:d((()=>[h(F(t.code),1)])),_:2},1024),p(v,{style:{flex:"1"}}),p(v,{class:"qutation-item__top__tag"},{default:d((()=>[h(F(t.typeStr),1)])),_:2},1024),p(v,{class:"qutation-item__top__status"},{default:d((()=>[p(w,{name:"chat",size:"28rpx",color:"#2647FF",label:t.checkStatusText,labelSize:"20rpx",labelColor:"#2647FF"},null,8,["label"])])),_:2},1024)])),_:2},1024),p(v,{class:"qutation-item__content"},{default:d((()=>[p(v,{class:"qutation-item__content__start"},{default:d((()=>[p(v,{class:"qutation-item__content__start__title"},{default:d((()=>[h(F(C.qutationFor.startAddress),1)])),_:1}),p(v,{class:"qutation-item__content__start__value"},{default:d((()=>[h(F(C.qutationFor.startAddressInfo),1)])),_:1})])),_:1}),p(L,{class:"u-m-l-8 u-m-r-8",style:{width:"132rpx",height:"12rpx"},src:I}),p(v,{class:"qutation-item__content__end"},{default:d((()=>[p(v,{class:"qutation-item__content__end__title"},{default:d((()=>[h(F(C.qutationFor.endAddress),1)])),_:1}),p(v,{class:"qutation-item__content__end__value"},{default:d((()=>[h(F(C.qutationFor.endAddressInfo),1)])),_:1})])),_:1})])),_:1}),p(v,{class:"u-flex u-flex-between u-flex-items-center",style:{margin:"20rpx 30rpx 0 30rpx"}},{default:d((()=>[p(v,{style:{flex:"1",color:"'#292a2b'","font-size":"24rpx"}},{default:d((()=>[h("111")])),_:1}),p(v,{style:{display:"flex","flex-direction":"column","align-items":"end"}},{default:d((()=>[p(v,{class:"qp-one-price"},{default:d((()=>[p(R,{class:"qp-one-price__unit"},{default:d((()=>[h("¥")])),_:1}),p(R,{class:"qp-one-price__value"},{default:d((()=>[h(F(t.freight),1)])),_:2},1024)])),_:2},1024),p(v,{style:{"font-size":"20rpx",color:"#666E81"}},{default:d((()=>[h("报价金额")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]))])),_:2},1024)))),128))])),_:1},8,["skeleton","loading"])])),_:2},[""==a.type?{name:"top",fn:d((()=>[p(v,{style:{"background-color":"#fff"}},{default:d((()=>[p(D,{list:C.tabs,current:C.tabIndex,onChange:S.tabChange,lineWidth:"22",lineColor:"#292a2b",activeStyle:{color:"#303133",fontWeight:"bold",transform:"scale(1.05)"},inactiveStyle:{color:"#606266",transform:"scale(1)"},itemStyle:"padding-left: 15px; padding-right: 15px; height: 42px;"},null,8,["list","current","onChange","activeStyle","inactiveStyle"])])),_:1})])),key:"0"}:void 0]),1032,["onOnRefresh"])}],["__scopeId","data-v-93e74feb"]]);export{R as default};
