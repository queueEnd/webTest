import{_ as t,bL as e,s,T as a,cy as i,cz as l,cA as o,R as d,V as n,r,c,A as u,i as h,w as p,b as f,K as y,d as _,L as m,o as g,g as x,k as C,j as b,t as w,h as A,p as v,m as k,q as V,N as D}from"./index-FwbBwjbJ.js";import{_ as z}from"./z-paging.B7jAqyNm.js";import{a as j}from"./addressChoose.MTkXPzcD.js";import{_ as S}from"./icon_must_input.CqfBCRGc.js";import"./fuse.BI5DUiN0.js";const B=t({components:{addressChooseVue:j},data:()=>({type:1,name:"",phone:"",country:null,province:null,city:null,district:null,detailAddress:"",showCity:!1,editData:null}),computed:{canSubmit(){return this.country&&""!=this.detailAddress&&""!=this.name&&""!=this.phone}},onLoad(t){this.type=t.type;this.getOpenerEventChannel().on("edit",(t=>{console.log(JSON.stringify(t)),this.editData=t,null!=this.editData&&(e({title:"编辑地址"}),this.name=this.editData.name,this.phone=this.editData.phone)}))},methods:{addressSelect(t){this.showCity=!1,this.country=t.country,this.province=t.province,this.city=t.city,this.district=t.district},chooseCity(){this.showCity=!0},countryText(){return this.province&&""!=this.province?this.province+this.city+this.district:this.country&&""!=this.country?this.country:""},addAddress(){if(!this.canSubmit)return;if(""==this.name)return void s({title:"请输入联系人",icon:"none"});if(""==this.phone)return void s({title:"请输入联系电话",icon:"none"});if(!this.country||""==this.country)return void s({title:"请选择省市区或国家",icon:"none"});if(!this.detailAddress||""==this.detailAddress)return void s({title:"输入详细地址",icon:"none"});const t={status:0,custype:this.type,name:this.name,phone:this.phone,address:this.country+this.province+this.city+this.district+this.detailAddress};this.editData&&(t.id=this.editData.id,t.custype=this.editData.custype),a({title:"正在提交..."}),i(this.editData?l:o,t).then((t=>{d()})).catch((t=>{s({icon:"error",title:"添加失败"})})).finally((t=>{n()}))}}},[["render",function(t,e,s,a,i,l){const o=v,d=k,n=r(c("u-input"),f),j=V,B=r(c("u-line"),y),L=r(c("u-icon"),_),T=D,U=u("addressChooseVue"),q=r(c("u-popup"),m),E=r(c("z-paging"),z);return g(),h(E,{style:{"background-color":"#f0f2f7"}},{default:p((()=>[x(j,{style:{"padding-top":"20rpx"}},{default:p((()=>[x(j,{class:"ad-textBg"},{default:p((()=>[x(j,{class:"u-flex u-flex-items-center"},{default:p((()=>[x(o,{class:"text_black_14"},{default:p((()=>[C(" 联系人 ")])),_:1}),x(d,{src:S,style:{width:"40rpx",height:"24rpx","margin-left":"16rpx"}}),x(n,{class:"u-m-l-20",modelValue:i.name,"onUpdate:modelValue":e[0]||(e[0]=t=>i.name=t),border:"none",placeholder:"请输入联系人",inputAlign:"right"},null,8,["modelValue"])])),_:1}),x(B,{color:"#f0f2f7",style:{margin:"20rpx 0"}}),x(j,{class:"u-flex u-flex-items-center"},{default:p((()=>[x(o,{class:"text_black_14"},{default:p((()=>[C(" 联系电话 ")])),_:1}),x(d,{src:S,style:{width:"40rpx",height:"24rpx","margin-left":"16rpx"}}),x(n,{class:"u-m-l-20",modelValue:i.phone,"onUpdate:modelValue":e[1]||(e[1]=t=>i.phone=t),border:"none",placeholder:"请输入联系电话",inputAlign:"right",type:"number",maxlength:"11"},null,8,["modelValue"])])),_:1})])),_:1}),x(j,{class:"ad-address"},{default:p((()=>[1==i.type?(g(),h(j,{key:0,class:"ad-address__title"},{default:p((()=>[x(j,{class:"ad-address__title__flag"},{default:p((()=>[C("发")])),_:1}),x(j,{class:"ad-address__title__t"},{default:p((()=>[C("起运地")])),_:1})])),_:1})):b("",!0),2==i.type?(g(),h(j,{key:1,class:"ad-address__title"},{default:p((()=>[x(j,{class:"ad-address__title__flagEnd"},{default:p((()=>[C("收")])),_:1}),x(j,{class:"ad-address__title__t"},{default:p((()=>[C("目的地")])),_:1})])),_:1})):b("",!0),x(j,{class:"u-flex u-flex-items-center u-flex-between u-p-t-30 u-p-b-30",onClick:l.chooseCity},{default:p((()=>[i.country?(g(),h(j,{key:1,style:{"font-size":"26rpx",color:"#272e3f","font-weight":"500"}},{default:p((()=>[C(w(l.countryText()),1)])),_:1})):(g(),h(j,{key:0,style:{"font-size":"26rpx",color:"#A8B0BC","font-weight":"500"}},{default:p((()=>[C("省市区/国家")])),_:1})),x(L,{name:"arrow-right",size:"20rpx"})])),_:1},8,["onClick"]),x(B,{color:"#f0f2f7"}),x(j,{class:"u-p-t-30 u-p-b-30"},{default:p((()=>[x(T,{style:{"font-size":"26rpx",color:"#272e3f","font-weight":"500"},border:"bottom",modelValue:i.detailAddress,"onUpdate:modelValue":e[2]||(e[2]=t=>i.detailAddress=t),placeholder:"详细地址（例如**街**号**）","placeholder-style":{color:"#A8B0BC"}},null,8,["modelValue"])])),_:1}),x(B,{color:"#f0f2f7"}),x(j,{class:A(["ad-address__confirm",{active:l.canSubmit}]),onClick:l.addAddress},{default:p((()=>[C("确定")])),_:1},8,["class","onClick"])])),_:1})])),_:1}),x(q,{show:i.showCity,round:12,mode:"bottom",onClose:e[4]||(e[4]=t=>i.showCity=!1)},{default:p((()=>[x(U,{style:{height:"1000rpx"},onConfirm:l.addressSelect,onClose:e[3]||(e[3]=t=>i.showCity=!1)},null,8,["onConfirm"])])),_:1},8,["show"])])),_:1})}],["__scopeId","data-v-36baac94"]]);export{B as default};
