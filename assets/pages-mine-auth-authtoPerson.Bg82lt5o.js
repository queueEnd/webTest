import{_ as e,T as o,U as l,V as a,s as t,bR as d,R as s,r as n,c as r,f as i,g as u,w as m,F as c,b as h,W as f,d as p,a4 as b,X as g,K as M,bw as _,o as C,k as y,i as V,t as w,q as x,p as S}from"./index-oXtcu1jG.js";import{_ as k}from"./z-paging.5yIaKEvz.js";const $=e({onReady(){this.$refs.uForm.setRules(this.formRules)},data:()=>({formModel:{idcard:"",idname:"",phone:"",smscode:""},formRules:{idcard:{type:"string",required:!0,message:"请输入身份证号码",trigger:["blur"]},idname:{type:"string",required:!0,message:"请输入身份证姓名",trigger:["blur"]},phone:[{required:!0,message:"请输入手机号",trigger:["change","blur"]},{validator:(e,o,l)=>uni.$u.test.mobile(o),message:"手机号码不正确",trigger:["change","blur"]}],smscode:{type:"string",required:!0,message:"请输入验证码",trigger:["blur"]}},canSend:!0,codeText:"",showModal:!1,smsKey:"",submiting:!1}),methods:{closeModal(){this.submiting||(this.showModal=!1)},codeChange(e){this.codeText=e},codeEnd(){this.canSend=!0},sendSMSCode(){uni.$u.test.mobile(this.formModel.phone)?this.toApiSMSCode():uni.$u.toast("请输入正确的手机号码")},toApiSMSCode(){this.formModel.phone.length<10?uni.$u.toast("请输入手机号码"):(o({title:"正在发送...",mask:!0}),l(this.formModel.phone).then((e=>{e.data.code&&(a(),t({icon:"none",title:"验证码已发送"}),this.smsKey=e.data.code)})).catch((e=>{a(),uni.$u.toast("发送失败")})))},submit(){this.$refs.uForm.validate().then((e=>{this.showModal=!0})).catch((e=>{uni.$u.toast("校验失败")}))},actionConfirm(){this.submiting=!0,d(this.formModel,this.smsKey).then((e=>{this.submiting=fale,this.showModal=!1,a(),uni.$u.toast("已提交");this.getOpenerEventChannel().emit("authSubmit",{}),s()})).catch((e=>{this.submiting=!1,this.showModal=!1,a(),uni.$u.toast("提交失败")}))}}},[["render",function(e,o,l,a,t,d){const s=x,$=n(r("u-input"),h),B=n(r("u-form-item"),f),F=n(r("u-icon"),p),E=n(r("u-code"),b),z=n(r("u--form"),g),R=n(r("u-line"),M),U=n(r("z-paging"),k),q=S,v=n(r("u-modal"),_);return C(),i(c,null,[u(U,{style:{"background-color":"#F0F2F7"}},{bottom:m((()=>[u(s,{class:"u-p-b-60"},{default:m((()=>[u(R),u(s,{class:"u-m-t-20 z-mine-submit-btn",onClick:d.submit},{default:m((()=>[y("提交")])),_:1},8,["onClick"])])),_:1})])),default:m((()=>[u(s,null,{default:m((()=>[u(s,{class:"z-mine-setion",style:{padding:"26rpx 30rpx 0 30rpx"}},{default:m((()=>[u(s,{class:"z-mine-setion-title"},{default:m((()=>[y("主体信息登记")])),_:1}),u(z,{class:"u-p-t-12 u-p-b-12",ref:"uForm",model:t.formModel,labelPosition:"left",labelStyle:{"font-weight":500,color:"#292A2B"},labelWidth:"auto"},{default:m((()=>[u(B,{labelWidth:"auto",label:"身份证姓名",prop:"idname",borderBottom:""},{default:m((()=>[u($,{modelValue:t.formModel.idname,"onUpdate:modelValue":o[0]||(o[0]=e=>t.formModel.idname=e),border:"none",placeholder:"请输入","input-align":"right",clearable:""},null,8,["modelValue"])])),_:1}),u(B,{label:"身份证号码",prop:"idcard",borderBottom:""},{default:m((()=>[u($,{modelValue:t.formModel.idcard,"onUpdate:modelValue":o[1]||(o[1]=e=>t.formModel.idcard=e),border:"none",placeholder:"请输入","input-align":"right",clearable:""},null,8,["modelValue"])])),_:1}),u(B,{label:"管理员身份验证",prop:"----",borderBottom:""},{default:m((()=>[u($,{modelValue:t.formModel.idname,"onUpdate:modelValue":o[2]||(o[2]=e=>t.formModel.idname=e),border:"none",placeholder:"请先填写身份信息","input-align":"right",disabled:"",disabledColor:"#fff"},null,8,["modelValue"]),u(F,{name:"arrow-right",color:"#A8B0BC"})])),_:1}),u(B,{label:"手机号码",prop:"phone",borderBottom:""},{default:m((()=>[u($,{modelValue:t.formModel.phone,"onUpdate:modelValue":o[3]||(o[3]=e=>t.formModel.phone=e),border:"none",placeholder:"请输入","input-align":"right",type:"number",clearable:""},null,8,["modelValue"])])),_:1}),u(B,{label:"短信验证码",prop:"smscode",borderBottom:""},{default:m((()=>[u($,{class:"u-m-r-20",modelValue:t.formModel.smscode,"onUpdate:modelValue":o[4]||(o[4]=e=>t.formModel.smscode=e),border:"none",placeholder:"请输入","input-align":"right",type:"number",clearable:""},null,8,["modelValue"]),u(E,{ref:"uCode",seconds:120,changeText:"Xs重新获取",onChange:d.codeChange,onEnd:d.codeEnd},null,8,["onChange","onEnd"]),t.canSend?(C(),V(s,{key:0,style:{color:"#2647FF"},onClick:d.sendSMSCode},{default:m((()=>[y("发送验证码")])),_:1},8,["onClick"])):(C(),V(s,{key:1},{default:m((()=>[y(w(t.codeText),1)])),_:1}))])),_:1})])),_:1},8,["model"])])),_:1}),u(s,{style:{margin:"20rpx 30rpx","font-size":"24rpx",color:"#a8b0bc"}},{default:m((()=>[y(" * 多式联运智慧大脑平台致力于打造真实、合法、有效的互联网平台。为了更好的保障你和广大用户的合法权益，请你认真填写以下登记信息。 ")])),_:1})])),_:1})])),_:1}),u(v,{show:t.showModal,width:"600rpx",closeOnClickOverlay:!0,onConfirm:d.actionConfirm,onClose:d.closeModal,onCancel:d.closeModal,ref:"uModal",showCancelButton:!0,asyncClose:!0},{default:m((()=>[u(s,null,{default:m((()=>[u(s,{style:{"text-align":"center"}},{default:m((()=>[y("提示")])),_:1}),u(s,{class:"u-m-t-30"},{default:m((()=>[y("主体信息提交后不可修改")])),_:1}),u(s,null,{default:m((()=>[u(s,{class:"u-m-t-10"},{default:m((()=>[u(q,{style:{color:"#666E81"}},{default:m((()=>[y("主体名称：")])),_:1}),u(q,null,{default:m((()=>[y(w(t.formModel.idname),1)])),_:1})])),_:1}),u(s,{class:"u-m-t-10"},{default:m((()=>[u(q,{style:{color:"#666E81"}},{default:m((()=>[y("主体类型：")])),_:1}),u(q,null,{default:m((()=>[y("个人")])),_:1})])),_:1})])),_:1}),u(s,{class:"u-m-t-40",style:{color:"#666E81"}},{default:m((()=>[y("你需对填的资料真实性、合法性、准确性和有效性")])),_:1})])),_:1})])),_:1},8,["show","onConfirm","onClose","onCancel"])],64)}],["__scopeId","data-v-7c2cc207"]]);export{$ as default};
