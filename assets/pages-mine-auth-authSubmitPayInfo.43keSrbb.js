import{_ as t,bN as a,bO as e,aJ as s,T as o,aV as l,V as i,s as n,bQ as c,R as u,r as f,c as m,A as p,i as d,w as y,d as r,K as h,o as g,g as _,k as x,t as k,j as I,q as b,p as F}from"./index-oXtcu1jG.js";import{_ as C}from"./uv-skeletons.Bd1_6wiO.js";import{_ as z}from"./z-paging.5yIaKEvz.js";import{f as B}from"./file-choose.DGJur1BJ.js";import{o as N}from"./zhtuseful.CyewbK9i.js";const A=t({components:{fileChoose:B},onReady(){this.$refs.uForm.setRules(this.formRules)},data:()=>({companyId:null,loading:!1,skeleton:N.listSkeleton,fileDatas:[],uploadedFiles:[],uploadStatus:[],editFiles:[],manageVerifyWayList:[{name:"将法定代表人设置为管理员"},{name:"设置其他人为管理员"}],payInfo:null,submiting:!1}),onLoad(t){t.companyId&&(this.companyId=t.companyId),this.loadAuthInfo()},methods:{fileChange(t){this.fileDatas=t},loadAuthInfo(){this.loading=!0,a().then((t=>{this.loading=!1,this.payInfo=t.data})).catch((t=>{this.loading=!1}))},copyText(t){e({data:t,success:function(){uni.$u.toast("已复制到剪贴板")},fail:function(){uni.$u.toast("复制失败")}})},submit(){0!=this.fileDatas.length?s({title:"提示",content:"是否上传支付凭证",success:t=>{t.confirm&&this.actionConfirm()}}):uni.$u.toast("请选择支付凭证附件")},async actionConfirm(){if(this.submiting=!0,o({title:"正在提交",mask:!0}),await l(this.fileDatas,this.uploadedFiles,this.uploadStatus),this.uploadStatus.includes("fail"))return i(),n({title:"部分文件上传失败，请重试",icon:"none"}),void(this.submiting=!1);const t=[];for(let e=0;e<this.fileDatas.length;e++){const a=this.fileDatas[e];let s={companyId:this.companyId,fileName:a.netName?a.netName:"",fileUrl:a.netPath?a.netPath:"",fileType:a.netType?a.netType:"",type:1};t.push(s)}const a={};a.payFiles=t,a.id=this.companyId,console.log(a),c(a,this.smsKey).then((t=>{this.submiting=!1,uni.$u.toast("已提交");this.getOpenerEventChannel().emit("authSubmit",{}),u()})).catch((t=>{this.submiting=!1,uni.$u.toast("提交失败")}))}}},[["render",function(t,a,e,s,o,l){const i=b,n=F,c=f(m("u-icon"),r),u=p("fileChoose"),B=f(m("uv-skeletons"),C),N=f(m("u-line"),h),A=f(m("z-paging"),z);return g(),d(A,{style:{"background-color":"#F0F2F7"}},{bottom:y((()=>[_(i,{class:"u-p-b-60"},{default:y((()=>[_(N),_(i,{class:"u-m-t-20 z-mine-submit-btn",onClick:l.submit},{default:y((()=>[x("提交")])),_:1},8,["onClick"])])),_:1})])),default:y((()=>[_(i,null,{default:y((()=>[_(B,{animate:!0,loading:o.loading,skeleton:o.skeleton},{default:y((()=>[o.payInfo?(g(),d(i,{key:0,class:"z-mine-setion",style:{padding:"26rpx 30rpx 26rpx 30rpx"}},{default:y((()=>[_(i,{class:"z-mine-setion-title"},{default:y((()=>[x("支付验证信息")])),_:1}),_(i,{style:{"margin-top":"30rpx",padding:"20rpx","background-color":"#F9F9F9"}},{default:y((()=>[_(i,{style:{"font-size":"24rpx",color:"#666E81","border-radius":"8px"}},{default:y((()=>[x(" 1、为验证真实性，此对公账户需给平台打款验证，请尽快联系贵公司/单位财务进行打款，金额不限；2、平台收到汇款后，会将注册结果发至管理员消息；3、打款将原路退回至您的对公账户。 ")])),_:1}),_(i,{class:"u-m-t-30 u-flex",style:{"font-size":"24rpx"}},{default:y((()=>[_(n,{style:{flex:"1",color:"#666E81"}},{default:y((()=>[x("开户名称")])),_:1}),_(n,{style:{color:"#292A2B","font-weight":"500"}},{default:y((()=>[x(k(o.payInfo.payName),1)])),_:1}),_(c,{onClick:a[0]||(a[0]=t=>l.copyText(o.payInfo.payName)),class:"u-m-l-8",name:"/static/image/common/ic_copy.png"})])),_:1}),_(i,{class:"u-m-t-20 u-flex",style:{"font-size":"24rpx"}},{default:y((()=>[_(n,{style:{flex:"1",color:"#666E81"}},{default:y((()=>[x("开户银行")])),_:1}),_(n,{style:{color:"#292A2B","font-weight":"500"}},{default:y((()=>[x(k(o.payInfo.payBankName),1)])),_:1}),_(c,{onClick:a[1]||(a[1]=t=>l.copyText(o.payInfo.payBankName)),class:"u-m-l-8",name:"/static/image/common/ic_copy.png"})])),_:1}),_(i,{class:"u-m-t-20 u-flex",style:{"font-size":"24rpx"}},{default:y((()=>[_(n,{style:{flex:"1",color:"#666E81"}},{default:y((()=>[x("银行支行")])),_:1}),_(n,{style:{color:"#292A2B","font-weight":"500"}},{default:y((()=>[x(k(o.payInfo.payBankAdd),1)])),_:1}),_(c,{onClick:a[2]||(a[2]=t=>l.copyText(o.payInfo.payBankAdd)),class:"u-m-l-8",name:"/static/image/common/ic_copy.png"})])),_:1}),_(i,{class:"u-m-t-20 u-flex",style:{"font-size":"24rpx"}},{default:y((()=>[_(n,{style:{flex:"1",color:"#666E81"}},{default:y((()=>[x("银行账号")])),_:1}),_(n,{style:{color:"#292A2B","font-weight":"500"}},{default:y((()=>[x(k(o.payInfo.payBankNum),1)])),_:1}),_(c,{onClick:a[3]||(a[3]=t=>l.copyText(o.payInfo.payBankNum)),class:"u-m-l-8",name:"/static/image/common/ic_copy.png"})])),_:1})])),_:1}),_(i,{class:"u-m-t-30"},{default:y((()=>[_(n,{class:"z-mine-setion-title",style:{"font-size":"26rpx"}},{default:y((()=>[x("支付凭证上传")])),_:1}),_(n,{style:{"font-size":"22rpx",color:"#a8b0bc","font-weight":"400"}})])),_:1}),_(u,{ref:"fileWrap",onFilesChange:l.fileChange,editFiles:o.editFiles},null,8,["onFilesChange","editFiles"])])),_:1})):I("",!0)])),_:1},8,["loading","skeleton"])])),_:1})])),_:1})}],["__scopeId","data-v-6ac990cc"]]);export{A as default};
