import{_ as e,r as a,a8 as o,c as l,aL as t,aM as s,bs as h,bt as n,L as c,o as i,i as r,w as u,g as m,y as d,f as b,l as p,F as k,k as g,q as f,S as C}from"./index-FwbBwjbJ.js";import{F as V}from"./fuse.BI5DUiN0.js";const y=e({emits:["close","confirm"],props:{type:{type:Number,default:0},items:{type:Array,default:[]},selectItems:{type:Array,default:[]},height:{type:Number,default:400},show:{type:Boolean,default:!1}},data:()=>({popShow:!1,radioValue:"",checkboxValue:[],searchCheckboxValue:[],keyword:"",searchResult:[]}),watch:{show:{handler(){this.popShow=this.show},immediate:!0},items:{handler(){this.items.length>0&&(this.fuse=new V(this.items,{keys:[{name:"name"}],threshold:.3,includeScore:!0}))},immediate:!0},selectItems:{handler(){0==this.type&&(this.selectItems.length>0?this.radioValue=this.selectItems[0].name:this.radioValue="")},immediate:!0}},computed:{showArr(){return""!=this.keyword?this.searchResult:this.items}},methods:{radioGroupChange(e){},checkboxGroupChange(e){""==this.keyword&&this.mergeCheckBox()},searchChange(e){if(""==e)1==this.type&&this.mergeCheckBox(),this.searchResult=[],this.checkboxValue=[];else{const a=this.fuse.search(e).map((e=>e.item));this.searchResult=a}},mergeCheckBox(){const e=[];for(var a=0;a<this.searchResult.length;a++){const l=this.searchResult[a];let t=!0;for(var o=0;o<this.searchCheckboxValue.length;o++){if(this.checkboxValue[o]==l.name){t=!1;break}}t&&e.push(l)}console.log(this.checkboxValue),console.log(this.searchCheckboxValue);const l=this.checkboxValue.filter((a=>!e.some((e=>e===a))));console.log(l),this.checkboxValue=l.concat(this.searchCheckboxValue),console.log(l)},closePop(){this.$emit("close")},confirmAction(){if(0==this.type){console.log(this.radioValue);for(var e=0;e<this.items.length;e++){const a=this.items[e];if(a.name==this.radioValue){this.$emit("confirm",a);break}}}else console.log(this.checkboxValue),this.$emit("confirm",this.checkboxValue)}}},[["render",function(e,V,y,x,w,F){const _=a(l("u-search"),o),z=f,S=a(l("u-radio"),t),v=a(l("u-radio-group"),s),B=a(l("u-checkbox"),h),R=a(l("u-checkbox-group"),n),A=C,G=a(l("u-popup"),c);return i(),r(G,{show:w.popShow,mode:"center",round:"12",closeOnClickOverlay:!0,onClose:F.closePop},{default:u((()=>[m(z,{class:"trade-select-bg"},{default:u((()=>[m(z,null,{default:u((()=>[m(_,{modelValue:w.keyword,"onUpdate:modelValue":V[0]||(V[0]=e=>w.keyword=e),placeholder:"搜索",showAction:!1,searchIconSize:20,size:"",color:"#272E3F",onChange:F.searchChange},null,8,["modelValue","onChange"])])),_:1}),m(z,{class:"trade-select-content"},{default:u((()=>[m(A,{"scroll-y":"",style:d({height:y.height+"rpx"})},{default:u((()=>[0==y.type?(i(),r(z,{key:0},{default:u((()=>[""==w.keyword?(i(),r(v,{key:0,modelValue:w.radioValue,"onUpdate:modelValue":V[1]||(V[1]=e=>w.radioValue=e),onChange:F.radioGroupChange,borderBottom:!1,placement:"column",iconPlacement:"right"},{default:u((()=>[(i(!0),b(k,null,p(y.items,((e,a)=>(i(),r(S,{key:a,activeColor:"#2647FF",label:e.name,labelSize:14,labelColor:"#272E3F",name:e.name,size:15,disabled:e.disabled},null,8,["label","name","disabled"])))),128))])),_:1},8,["modelValue","onChange"])):(i(),r(v,{key:1,modelValue:w.radioValue,"onUpdate:modelValue":V[2]||(V[2]=e=>w.radioValue=e),onChange:F.radioGroupChange,borderBottom:!1,placement:"column",iconPlacement:"right"},{default:u((()=>[(i(!0),b(k,null,p(w.searchResult,((e,a)=>(i(),r(S,{key:a,activeColor:"#2647FF",label:e.name,labelSize:14,labelColor:"#272E3F",name:e.name,size:15},null,8,["label","name"])))),128))])),_:1},8,["modelValue","onChange"]))])),_:1})):(i(),r(z,{key:1},{default:u((()=>[""==w.keyword?(i(),r(R,{key:0,modelValue:w.checkboxValue,"onUpdate:modelValue":V[3]||(V[3]=e=>w.checkboxValue=e),onChange:F.checkboxGroupChange,borderBottom:!1,placement:"column",iconPlacement:"right"},{default:u((()=>[(i(!0),b(k,null,p(y.items,((e,a)=>(i(),r(B,{key:a,activeColor:"#2647FF",label:e.name,labelSize:14,labelColor:"#272E3F",name:e.name,size:15},null,8,["label","name"])))),128))])),_:1},8,["modelValue","onChange"])):(i(),r(R,{key:1,modelValue:w.searchCheckboxValue,"onUpdate:modelValue":V[4]||(V[4]=e=>w.searchCheckboxValue=e),onChange:F.checkboxGroupChange,borderBottom:!1,placement:"column",iconPlacement:"right"},{default:u((()=>[(i(!0),b(k,null,p(w.searchResult,((e,a)=>(i(),r(B,{key:a,activeColor:"#2647FF",label:e.name,labelSize:14,labelColor:"#272E3F",name:e.name,size:15},null,8,["label","name"])))),128))])),_:1},8,["modelValue","onChange"]))])),_:1}))])),_:1},8,["style"])])),_:1}),m(z,{style:{"background-color":"#2647FF",color:"#fff","font-size":"28rpx",height:"80rpx","line-height":"80rpx","font-weight":"500","text-align":"center","border-radius":"80rpx"},onClick:F.confirmAction},{default:u((()=>[g("确定")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["show","onClose"])}],["__scopeId","data-v-f0825e83"]]);export{y as t};
