import{_ as t,a$ as s,s as e,T as d,V as i,R as o,r as a,c as r,A as l,i as n,w as c,d as u,K as p,L as h,o as f,g as y,k as _,j as m,t as A,h as g,ao as C,q as x,N as v}from"./index-oXtcu1jG.js";import{_ as w}from"./z-paging.5yIaKEvz.js";import{n as k}from"./zhdnTradeApi.DtENn4FQ.js";import{a as b}from"./addressChoose.c3TwQtYX.js";import{a as B}from"./functionUtil.Dj0cAFX2.js";import"./fuse.BI5DUiN0.js";const j=t({components:{addressChoose:b},data:()=>({type:4,position:0,inputAddress:"",country:null,province:null,city:null,district:null,detailAddress:"",showCity:!1}),onLoad(t){t.type&&(this.type=Number(t.type)),t.position&&(this.position=Number(t.position))},computed:{canSubmit(){return this.country&&""!=this.detailAddress}},methods:{addressSelect(t){this.showCity=!1,this.country=t.country,this.province=t.province,this.city=t.city,this.district=t.district},chooseCity(){this.showCity=!0},countryText(){return this.province&&""!=this.province?this.province+this.city+this.district:this.country&&""!=this.country?this.country:""},addressBlur(t){console.log(t),this.inputAddress.length>0&&this.parseAddressTo(this.inputAddress)},pasteAddress(){let t=this;s({success:function(s){t.inputAddress=s.data,t.parseAddressTo(s.data)},fail:function(t){uni.$u.toast("无法获取剪贴板内容")}})},parseAddressTo(t){if(!t||0==t.length)return;const s=B(t);this.province=s.province,this.city=s.city,this.district=s.district,this.detailAddress=s.detail,console.log(s)},addAddress(){if(this.country&&""!=this.country||(this.country="中国"),!this.detailAddress||""==this.detailAddress)return void e({title:"输入详细地址",icon:"none"});const t={type:this.type,district:this.district,city:this.city,country:this.country,province:this.province,address:this.detailAddress,isdefault:0};d({title:"正在提交..."}),k(t).then((t=>{i(),e({title:"已提交",icon:"success"});this.getOpenerEventChannel().emit("addAddress",{address:"1"}),o()})).catch((t=>{i(),e({icon:"error",title:"提交失败"})}))}}},[["render",function(t,s,e,d,i,o){const k=C,b=x,B=a(r("u-icon"),u),j=a(r("u-line"),p),z=v,T=l("addressChoose"),V=a(r("u-popup"),h),S=a(r("z-paging"),w);return f(),n(S,{style:{"background-color":"#f0f2f7"}},{default:c((()=>[y(b,{style:{"padding-top":"20rpx"}},{default:c((()=>[y(b,{class:"ad-textBg"},{default:c((()=>[y(k,{modelValue:i.inputAddress,"onUpdate:modelValue":s[0]||(s[0]=t=>i.inputAddress=t),class:"ad-textBg__text",placeholder:"「粘贴识别」或输入文本，智能拆分省、市、区和  详细地址",onBlur:o.addressBlur},null,8,["modelValue","onBlur"]),y(b,{style:{display:"flex","justify-content":"flex-end"}},{default:c((()=>[y(b,{class:"ad-textBg__paste",onClick:o.pasteAddress},{default:c((()=>[_("粘贴并识别")])),_:1},8,["onClick"])])),_:1})])),_:1}),y(b,{class:"ad-address"},{default:c((()=>[0==i.type?(f(),n(b,{key:0,class:"ad-address__title"},{default:c((()=>[y(b,{class:"ad-address__title__flag"},{default:c((()=>[_("起")])),_:1}),y(b,{class:"ad-address__title__t"},{default:c((()=>[_("起运地")])),_:1})])),_:1})):m("",!0),1==i.type?(f(),n(b,{key:1,class:"ad-address__title"},{default:c((()=>[y(b,{class:"ad-address__title__flagEnd"},{default:c((()=>[_("目")])),_:1}),y(b,{class:"ad-address__title__t"},{default:c((()=>[_("目的地")])),_:1})])),_:1})):m("",!0),y(b,{class:"u-flex u-flex-items-center u-flex-between u-p-t-30 u-p-b-30",onClick:o.chooseCity},{default:c((()=>[i.province||i.country?(f(),n(b,{key:1,style:{"font-size":"26rpx",color:"#272e3f","font-weight":"500"}},{default:c((()=>[_(A(o.countryText()),1)])),_:1})):(f(),n(b,{key:0,style:{"font-size":"26rpx",color:"#A8B0BC","font-weight":"500"}},{default:c((()=>[_("省市区/国家")])),_:1})),y(B,{name:"arrow-right",size:"20rpx"})])),_:1},8,["onClick"]),y(j,{color:"#f0f2f7"}),y(b,{class:"u-p-t-30 u-p-b-30"},{default:c((()=>[y(z,{style:{"font-size":"26rpx",color:"#272e3f","font-weight":"500"},border:"bottom",modelValue:i.detailAddress,"onUpdate:modelValue":s[1]||(s[1]=t=>i.detailAddress=t),placeholder:"详细地址（例如**街**号**）","placeholder-style":{color:"#A8B0BC"}},null,8,["modelValue"])])),_:1}),y(j,{color:"#f0f2f7"}),y(b,{class:g(["ad-address__confirm",{active:o.canSubmit}]),onClick:o.addAddress},{default:c((()=>[_("确定")])),_:1},8,["class","onClick"])])),_:1})])),_:1}),y(V,{show:i.showCity,round:12,mode:"bottom"},{default:c((()=>[y(T,{style:{height:"1000rpx"},onConfirm:o.addressSelect,onClose:s[2]||(s[2]=t=>i.showCity=!1)},null,8,["onConfirm"])])),_:1},8,["show"])])),_:1})}],["__scopeId","data-v-19285f78"]]);export{j as default};
