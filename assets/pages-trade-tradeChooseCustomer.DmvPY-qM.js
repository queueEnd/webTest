import{_ as e,bv as t,Q as s,r as a,c as l,f as c,g as i,w as o,F as r,a7 as n,aZ as d,d as f,K as u,L as p,o as h,k as m,t as g,i as A,l as x,q as y,p as _,M as S,S as P,h as k,j as v,m as w}from"./index-B3fvMXoi.js";import{_ as C}from"./z-paging.Ctbk3ePi.js";import{z as E}from"./zhtuseful.CyewbK9i.js";import{a as b}from"./zhdnGeneralApi.i4VQb_hS.js";const I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAcCAMAAAADZYwMAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAADhUExURUdwTP9iAP9sAP9rAP9sAP9tAP9sAP9sAP9qAP9sAP9qAP9tAP9sAP9sAP9sAP9sAP9pAP9sAP/////n1v/q2/+0ff/9+/99Hv+EKv98G//u4f+PPf/r3f+hXP95F/97Gv/y6f92Ev/w5v/k0f/o2P/m0//t3/94Fv/Akf+BJP/hy/91EP9+IP+OOv+tcP/av/+fWv+1f/9vBv/Emf+QP//dxf9wBv9zDP/17f+2gP/8+v/x5/9tAv91D/+HL/9xCf+ze/+KNP96GP+qa//38P+tcf/+/f/jz//+/v/GnP/693ZqxMYAAAARdFJOUwAN9Fj5B4njGMckm/rqyJkuVs9VeAAAAPxJREFUOMud00dyhEAMBdBPzjDSOKdxzjnnnO9/IMv2wgsEg6VFq+p3PQrUDahj+UVZeQ7+iv5TbpbaIFEeBjZIlMRGSFHPCCmKjZCSwAgp7ADvjt7267NNh8KzPebP01qcDYM3J8x8dV2/CU47XNgU97yj7HjwlfRx9/inry2JO3/QHlmhUNI+v79IG/TFzd+q71KirIeHlwIuaHxE2uKE/hEFKiU9EMEfq7JMbTT9ZfC0+J5/a2a7cW5wXC1+ev12y5PNAwcyNZ8dY16ZozaY5urG9ProFrVChKZ7LjBIjBBxZIToRUaIODFCBGFug3IqmWuDgONVZeF3hV+LCmcOLqgaMwAAAABJRU5ErkJggg==";const M=e({props:{type:{type:Number,default:1}},data:()=>({keyword:"",dataList:[],dataSelect:[],showSelected:!1,defaultIds:[]}),onLoad(e){const s=this.getOpenerEventChannel();let a=this;s.on("customerList",(function(e){a.configEditData(e)})),this.searchkeywordDebounced=E((async e=>{if(e){if(1==this.type){const t=(await b(e)).data;t.forEach((e=>{const t=JSON.parse(e.serviceMode);if(t.length>0){const s=t[0].serviceMode;e.serviceModeArr=s}else e.serviceModeArr=[]}));for(var s=0;s<this.dataSelect.length;s++){const e=this.dataSelect[s];for(var a=0;a<t.length;a++){const s=t[a];e.isSelect&&s.id==e.id&&(s.isSelect=!0)}}this.dataList=t.splice(0,20)}else{const l=(await t(e.name)).data;for(s=0;s<this.dataSelect.length;s++){const e=this.dataSelect[s];for(a=0;a<l.length;a++){const t=l[a];e.isSelect&&t.id==e.id&&(t.isSelect=!0)}}this.dataList=l.splice(0,20)}console.log(this.dataList)}}),200)},computed:{selectCount(){let e=0;return this.dataSelect.forEach((t=>{!0===t.isSelect&&e++})),e}},methods:{configEditData(e){setTimeout((()=>{this.defaultIds=JSON.parse(e.data),this.loadDefaultDatas()}),500)},async querySupplier(e){if(""==e)return;const t={name:e};this.searchkeywordDebounced(t)},loadDefaultDatas(){this.defaultIds.length>0&&(1==this.type?b({ids:this.defaultIds}).then((e=>{const t=e.data;t.forEach((e=>{e.isSelect=!0;const t=JSON.parse(e.serviceMode);if(t.length>0){const s=t[0].serviceMode;e.serviceModeArr=s}else e.serviceModeArr=[]})),this.dataSelect=t})).catch((e=>{})):t("",this.defaultIds).then((e=>{const t=e.data;t.forEach((e=>{e.isSelect=!0})),this.dataSelect=t})).catch((e=>{})))},isItemSelected(e){for(var t=0;t<this.dataSelect.length;t++){const s=this.dataSelect[t];if(e.id==s.id)return t}return-1},chooseItem(e){const t=this.isItemSelected(e);t>=0?(e.isSelect=!1,this.dataSelect.splice(t,1)):(e.isSelect=!0,this.dataSelect.push(e))},chooseItemPopup(e){e.isSelect=!e.isSelect;for(var t=0;t<this.dataList.length;t++){const s=this.dataList[t];if(e.id==s.id){s.isSelect=e.isSelect;break}}},selectComfirm(){this.showSelected=!1},confirmAction(){const e=this.dataSelect.filter((e=>1==e.isSelect));console.log(e);this.getOpenerEventChannel().emit("selectSendCustomer",{items:e}),s()}}},[["render",function(e,t,s,E,b,M){const j=a(l("u-search"),n),O=y,z=_,D=a(l("u-empty"),d),N=w,U=a(l("u-icon"),f),B=S,F=a(l("z-paging"),C),L=P,q=a(l("u-line"),u),G=a(l("u-popup"),p);return h(),c(r,null,[i(F,{style:{background:"#f1f3f6"}},{top:o((()=>[i(O,{style:{"background-color":"#fff",padding:"0\t30rpx 20rpx 30rpx"}},{default:o((()=>[i(j,{showAction:!1,placeholder:1==s.type?"请输入供应商名称":"请输入客户名称",onChange:M.querySupplier},null,8,["placeholder","onChange"])])),_:1})])),bottom:o((()=>[i(O,{style:{padding:"20rpx 30rpx 60rpx 30rpx","background-color":"white"}},{default:o((()=>[i(O,{class:"u-flex",style:{"justify-content":"center","font-size":"26rpx",color:"#999999","align-items":"center"}},{default:o((()=>[i(O,{onClick:t[0]||(t[0]=e=>b.showSelected=!0)},{default:o((()=>[i(z,null,{default:o((()=>[m("当前已选中 ")])),_:1}),i(z,{style:{color:"#333"}},{default:o((()=>[m(g(M.selectCount),1)])),_:1}),2==s.type?(h(),A(z,{key:0},{default:o((()=>[m(" 家客户")])),_:1})):(h(),A(z,{key:1},{default:o((()=>[m(" 家供应商")])),_:1}))])),_:1}),i(U,{name:"arrow-right",size:"12"})])),_:1}),i(B,{style:{"background-color":"blue",color:"#fff","margin-top":"20rpx"},onClick:M.confirmAction},{default:o((()=>[m("确定")])),_:1},8,["onClick"])])),_:1})])),default:o((()=>[i(O,null,{default:o((()=>[i(D,{style:{"margin-top":"200rpx"},show:0==b.dataList.length,icon:"/static/image/common/empty.png",width:"200rpx",height:"200rpx",text:" "},{default:o((()=>[i(O,{style:{display:"flex","flex-direction":"column","align-items":"center"}},{default:o((()=>[i(z,{style:{color:"#272e3f"}},{default:o((()=>[m("暂无相关数据")])),_:1}),i(z,{style:{color:"#999999","margin-top":"10rpx","font-size":"24rpx"}},{default:o((()=>[m("试试其他关键字吧")])),_:1})])),_:1})])),_:1},8,["show"]),(h(!0),c(r,null,x(b.dataList,((e,t)=>(h(),A(O,{class:k(["tcc-item",e.isSelect?"tcc-item_sel":""]),key:t,onClick:t=>M.chooseItem(e)},{default:o((()=>[1==s.type?(h(),A(O,{key:0},{default:o((()=>[e.isSelect?(h(),A(N,{key:0,src:I,style:{width:"56rpx",height:"28rpx",position:"absolute",top:"0",right:"0"}})):v("",!0),i(O,{class:"u-flex u-flex-items-center"},{default:o((()=>[i(U,{name:"/static/image/trade/customer_icon.png"}),i(z,{class:"tcc-item_name"},{default:o((()=>[m(g(e.supplierName),1)])),_:2},1024)])),_:2},1024),i(O,{class:"u-flex u-m-t-20"},{default:o((()=>[(h(!0),c(r,null,x(e.serviceModeArr,((e,t)=>(h(),A(O,{class:"tcc-item_tag",key:t},{default:o((()=>[m(g(e),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):(h(),A(O,{key:1},{default:o((()=>[e.isSelect?(h(),A(N,{key:0,src:I,style:{width:"56rpx",height:"28rpx",position:"absolute",top:"0",right:"0"}})):v("",!0),i(O,{class:"u-flex u-flex-items-center"},{default:o((()=>[i(U,{name:"/static/image/trade/customer_icon.png"}),i(z,{class:"tcc-item_name"},{default:o((()=>[m(g(e.comName),1)])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),i(G,{show:b.showSelected,round:12,mode:"bottom",closeOnClickOverlay:!0,onClose:t[2]||(t[2]=e=>b.showSelected=!1)},{default:o((()=>[i(O,null,{default:o((()=>[i(O,{class:"u-flex u-flex-items-center",style:{margin:"30rpx 30rpx 20rpx 30rpx","justify-content":"space-between"}},{default:o((()=>[i(O,{style:{"font-size":"30rpx","font-weight":"500",color:"#272e3f"}},{default:o((()=>[m("已选择的供应商")])),_:1}),i(O,{style:{width:"120rpx","font-size":"23rpx",display:"flex","justify-content":"flex-end"},onClick:t[1]||(t[1]=e=>b.showSelected=!1)},{default:o((()=>[i(U,{name:"close",size:"36rpx"})])),_:1})])),_:1}),i(L,{class:"tcc-pop_scroll"},{default:o((()=>[(h(!0),c(r,null,x(b.dataSelect,((e,t)=>(h(),A(O,{class:k(["tcc-item-pop",e.isSelect?"tcc-item_sel":""]),key:t,onClick:t=>M.chooseItemPopup(e)},{default:o((()=>[1==s.type?(h(),A(O,{key:0},{default:o((()=>[e.isSelect?(h(),A(N,{key:0,src:I,style:{width:"56rpx",height:"28rpx",position:"absolute",top:"0",right:"0"}})):v("",!0),i(O,{class:"u-flex u-flex-items-center"},{default:o((()=>[i(U,{name:"/static/image/trade/customer_icon.png"}),i(z,{class:"tcc-item_name"},{default:o((()=>[m(g(e.supplierName),1)])),_:2},1024)])),_:2},1024),i(O,{class:"u-flex u-m-t-20"},{default:o((()=>[(h(!0),c(r,null,x(e.serviceModeArr,((e,t)=>(h(),A(O,{class:"tcc-item_tag",key:t},{default:o((()=>[m(g(e),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):(h(),A(O,{key:1},{default:o((()=>[e.isSelect?(h(),A(N,{key:0,src:I,style:{width:"56rpx",height:"28rpx",position:"absolute",top:"0",right:"0"}})):v("",!0),i(O,{class:"u-flex u-flex-items-center"},{default:o((()=>[i(U,{name:"/static/image/trade/customer_icon.png"}),i(z,{class:"tcc-item_name"},{default:o((()=>[m(g(e.comName),1)])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1032,["class","onClick"])))),128))])),_:1}),i(O,null,{default:o((()=>[i(q),i(B,{style:{margin:"20rpx 30rpx 30rpx 30rpx","background-color":"blue",color:"#fff"},onClick:M.selectComfirm},{default:o((()=>[m("确定")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["show"])],64)}],["__scopeId","data-v-633d36e7"]]);export{M as default};
