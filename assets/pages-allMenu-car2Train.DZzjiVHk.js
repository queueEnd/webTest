import{_ as e,ak as t,c9 as l,aI as s,ca as a,cq as i,cG as n,n as r,r as o,c,A as d,f as h,g as u,w as p,F as g,ab as m,b as f,q as b,d as x,ac as y,aZ as _,e as w,o as L,k as C,i as k,j as A,y as V,l as N,m as D,p as H,S as z,t as M}from"./index-B3fvMXoi.js";import{g as j}from"./pythonApi.kJLAZc7b.js";import{h as F,_ as v}from"./banner_1.DXMLql39.js";import{_ as B}from"./icon_exchange.BR_gTjrT.js";import"./icon_arrow.Dhtc8TwB.js";const T=e({components:{hotLineVue:F},data(){const{windowWidth:e}=t();return{typeName:"",bgColor:"transparent",startAddress:"",endAddress:"",cc:"",channel:"全部通道",show:!1,channelList:[],isNew:!0,listLabel:[],list:[],leftList:[],rightList:[],windowWidth:e}},onLoad(e){this.typeName=e.typeName,"跨境班列"==this.typeName?this.getOutChannel():this.getChannel()},onShow(){this.getHistory()},methods:{exchange(){let e=this.startAddress;this.startAddress=this.endAddress,this.endAddress=e},confirm(e){this.channel=e.value[0],this.show=!1},getHistory(){l(this.typeName).then((e=>{this.listLabel=e.data}))},deleteHistory(e){s({title:"提示",content:"是否删除记录",success:t=>{t.confirm&&a(e).then((e=>{this.getHistory()}))}})},clearHistory(){s({title:"提示",content:"是否清空记录",success:e=>{if(e.confirm){let e="";for(let t of this.listLabel)e=e+t.id+",";a(e).then((e=>{this.listLabel=[]}))}}})},clickLabel(e){let t=e.record.split("-");this.startAddress=t[0],this.endAddress=t[1]},getHotLine(){i(this.typeName).then((e=>{this.list=e.data}))},getChannel(){j().then((e=>{if(0==e.length)return;this.channelList=[];let t=["全部通道"];for(let l of e)t.push(l.blpp);this.channelList.push(t)}))},getOutChannel(){n().then((e=>{if(0==e.length)return;this.channelList=[];let t=["全部通道"];for(let l of e.data)t.push(l.blpp);this.channelList.push(t)}))},search(){this.startAddress.length>0&&this.endAddress.length>0?r({url:`/pages/allMenu/car2TrainDetail?start=${this.startAddress}&end=${this.endAddress}`}):this.cc.length>0?"跨境班列"==this.typeName?r({url:`/pages/allMenu/car2TrainDetail?cc=${cc}&isOut=true`}):r({url:"/pages/allMenu/car2TrainDetail?cc="+this.cc}):"全部通道"!=this.channel?"跨境班列"==this.typeName?r({url:"/pages/allMenu/outLine/outLineDetail?line="+this.channel}):r({url:"/pages/allMenu/LineDetail?line="+this.channel}):"跨境班列"==this.typeName?r({url:"/pages/allMenu/outLine/outLineCount"}):r({url:"/pages/allMenu/LineCount"})}},onPageScroll(e){e.scrollTop>20?this.bgColor="#DDF3FE":this.bgColor="transparent"}},[["render",function(e,t,l,s,a,i){const n=o(c("u-navbar"),m),r=D,j=o(c("u-input"),f),F=b,T=o(c("u-icon"),x),U=H,$=z,O=d("hot-line-vue"),S=o(c("u-waterfall"),y),W=o(c("u-empty"),_),q=o(c("u-picker"),w);return L(),h(g,null,[u(F,{class:"u-flex-column",style:{background:"no-repeat top/100% url(../../static/image/home/bg_index.png)",padding:"0 30rpx 75px"}},{default:p((()=>[u(n,{placeholder:!0,borderBottom:!1,bgColor:a.bgColor,title:a.typeName},null,8,["bgColor","title"]),u(r,{src:v,style:{height:"82px",width:"100%",margin:"20rpx 0"}}),u(F,{class:"bg_white_radius_16 u-p-30 u-flex-column"},{default:p((()=>[u(F,{class:"u-flex u-flex-between u-flex-items-center",style:{margin:"30rpx 0"}},{default:p((()=>[u(j,{modelValue:a.startAddress,"onUpdate:modelValue":t[0]||(t[0]=e=>a.startAddress=e),"auto-height":!0,placeholder:"装车站",border:"bottom"},null,8,["modelValue"]),u(r,{src:B,style:{width:"60rpx",height:"60rpx",margin:"0 40rpx"},onClick:i.exchange},null,8,["onClick"]),u(j,{modelValue:a.endAddress,"onUpdate:modelValue":t[1]||(t[1]=e=>a.endAddress=e),"auto-height":!0,placeholder:"卸车站",border:"bottom"},null,8,["modelValue"])])),_:1}),u(F,{class:"u-flex u-flex-items-center u-flex-between"},{default:p((()=>[u(j,{modelValue:a.cc,"onUpdate:modelValue":t[2]||(t[2]=e=>a.cc=e),"auto-height":!0,placeholder:"车次",border:""},null,8,["modelValue"]),u(T,{name:"arrow-right",color:"#999999",label:a.channel,"label-pos":"left","label-size":"16","label-color":"#292A2B",onClick:t[3]||(t[3]=e=>a.show=!0)},null,8,["label"])])),_:1}),u(F,{style:{position:"relative","margin-top":"30rpx"}},{default:p((()=>[u(F,{class:"u-flex u-flex-center bg_btn",onClick:t[4]||(t[4]=e=>i.search())},{default:p((()=>[u(U,{style:{"font-size":"32rpx",color:"white"}},{default:p((()=>[C(" 班列查询 ")])),_:1})])),_:1}),a.isNew?(L(),k(U,{key:0,class:"scale_btn",style:{"font-size":"20rpx",color:"#B46422","background-color":"#FFDF81",padding:"12rpx","border-radius":"50rpx 50rpx 50rpx 0",position:"absolute",right:"0",top:"-30rpx"}},{default:p((()=>[C(" 新用户免费查询3次 ")])),_:1})):A("",!0)])),_:1}),a.listLabel.length>0?(L(),k(F,{key:0,class:"u-flex u-flex-items-center u-m-t-30 u-flex-between"},{default:p((()=>[u($,{"scroll-x":"true",style:V([`width:${a.windowWidth-95}px ;`,{"white-space":"nowrap"}]),"scroll-with-animation":"true"},{default:p((()=>[(L(!0),h(g,null,N(a.listLabel,((e,t)=>(L(),k(F,{key:t,class:"bg_gray_radius_15",style:{display:"inline-block",padding:"6rpx 16rpx","margin-right":"16rpx"}},{default:p((()=>[u(F,{class:"u-flex u-flex-items-center"},{default:p((()=>[u(U,{style:{"font-size":"22rpx",color:"#666E81"},onClick:t=>i.clickLabel(e)},{default:p((()=>[C(M(e.record),1)])),_:2},1032,["onClick"]),u(T,{name:"close",size:"14",style:{"margin-left":"10rpx"},onClick:t=>i.deleteHistory(e.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["style"]),u(U,{class:"text_black_12",onClick:i.clearHistory},{default:p((()=>[C(" 清除 ")])),_:1},8,["onClick"])])),_:1})):A("",!0)])),_:1}),u(U,{style:{"font-size":"32rpx",color:"#292A2B","font-weight":"bold",margin:"40rpx 0 24rpx"}},{default:p((()=>[C(" 热门班列 ")])),_:1}),a.list.length>0?(L(),k(S,{key:0,modelValue:a.list,"onUpdate:modelValue":t[5]||(t[5]=e=>a.list=e)},{left:p((({leftList:e})=>[u(O,{list:e},null,8,["list"])])),right:p((({rightList:e})=>[u(O,{list:e},null,8,["list"])])),_:1},8,["modelValue"])):(L(),k(W,{key:1}))])),_:1}),u(q,{title:"通道选择",show:a.show,columns:a.channelList,onConfirm:i.confirm,onCancel:t[6]||(t[6]=e=>a.show=!1)},null,8,["show","columns","onConfirm"])],64)}],["__scopeId","data-v-b4c58985"]]);export{T as default};
